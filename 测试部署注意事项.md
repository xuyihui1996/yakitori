# 🧪 分享测试链接注意事项

## ⚠️ 主要风险

### 1. **数据安全**
- ✅ **如果使用 Supabase + RLS**：相对安全，因为 RLS 策略限制了访问权限
- ⚠️ **如果使用 Mock 数据**：数据不会跨设备共享，但可能有混淆
- ❌ **如果 RLS 配置不当**：其他人可能看到或修改数据

### 2. **测试数据污染**
- 多人测试可能产生大量测试数据
- 测试数据可能影响真实使用
- 建议：测试前清理数据库，或使用独立的测试组

### 3. **功能测试干扰**
- 多人同时测试可能互相影响
- 例如：同时创建组、修改菜单等
- 建议：约定测试流程，避免冲突

## ✅ 检查清单（部署前）

### 如果使用 Supabase：
- [ ] 确认 RLS（Row Level Security）策略已正确配置
- [ ] 确认 `supabase_rls.sql` 已执行
- [ ] 确认只有组成员可以访问该组的数据
- [ ] 确认只有 Owner 可以删除成员、结账等操作

### 通用检查：
- [ ] 确认环境变量已正确配置（VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY）
- [ ] 确认应用可以正常访问
- [ ] 确认基本功能可以正常使用

## 📋 建议

### 1. **告知测试者**
- 说明这是**测试环境**
- 提醒不要输入**真实敏感信息**
- 提醒不要创建**大量无用数据**
- 说明可能存在的**功能限制或已知问题**

### 2. **测试流程建议**
- 每次测试后清理测试数据（如果可能）
- 约定测试时间，避免多人同时操作
- 记录发现的问题和反馈

### 3. **数据管理**
- 定期清理测试数据
- 如使用 Supabase，可以在 Dashboard 中手动删除测试数据
- 或者使用 SQL 脚本清理

### 4. **监控和日志**
- 在 Vercel Dashboard 中查看访问日志
- 在 Supabase Dashboard 中查看数据库操作日志
- 检查是否有异常访问或错误

## 🛡️ 安全建议

1. **不要暴露敏感信息**
   - Supabase 的 `anon` key 虽然公开，但必须有 RLS 保护
   - 不要在前端代码中硬编码任何密钥

2. **限制功能**
   - 考虑添加测试模式限制（如限制组数量、成员数量等）
   - 添加数据清理功能（仅测试环境）

3. **定期检查**
   - 定期检查数据库中的数据
   - 删除测试数据
   - 检查是否有异常访问

## 📝 测试脚本建议

可以创建一个清理脚本：

\`\`\`sql
-- 清理测试数据（谨慎使用！）
DELETE FROM round_items WHERE group_id LIKE 'G%';
DELETE FROM rounds WHERE group_id LIKE 'G%';
DELETE FROM group_menu_items WHERE group_id LIKE 'G%';
DELETE FROM groups WHERE id LIKE 'G%';
DELETE FROM users WHERE id LIKE 'U%';
\`\`\`

## ✅ 可以放心分享的情况

- ✅ RLS 策略正确配置
- ✅ 只允许组成员访问自己的数据
- ✅ 只有 Owner 可以进行管理操作
- ✅ 没有敏感数据泄露风险
- ✅ 测试环境与生产环境隔离

## ⚠️ 需要谨慎的情况

- ⚠️ RLS 策略未配置或配置错误
- ⚠️ 所有用户都可以访问所有数据
- ⚠️ 没有权限控制
- ⚠️ 可能泄露敏感信息

## 🎯 最佳实践

1. **先小范围测试**：先给 1-2 个信任的同事测试
2. **明确说明**：告知这是测试环境，可能有 bug
3. **收集反馈**：记录问题和建议
4. **定期清理**：测试后清理数据
5. **监控访问**：查看访问日志和数据库操作

---

**总结**：如果 RLS 配置正确，可以放心分享。但建议先小范围测试，明确告知这是测试环境。
